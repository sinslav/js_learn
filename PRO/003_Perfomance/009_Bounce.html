<!-- следует всегда откладывать внесение визуальных 
изменений до следующего обратного вызова requestAnimationFrame: -->
<!DOCTYPE html public "html5 rocks">
<html>
<head>
  <meta charset="utf-8">
  <title>Animation - Pre Fixes</title>
  <style>
    .mover {
        position: absolute;
        width: 100px;
        height: 100px;
        background: url("homer.png") center no-repeat;
        left: 90%;

        -webkit-transition: left 1.3s ease-out;
           -moz-transition: left 1.3s ease-out;
            -ms-transition: left 1.3s ease-out;
             -o-transition: left 1.3s ease-out;
                transition: left 1.3s ease-out;

    }

    .mover.left {
        left: 10%;
    }
  </style>
</head>
<body>

    <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>
        <div class="mover"></div>

<script>

    var movers = document.querySelectorAll('.mover');

    /**
        1500 элементов, все стили задаем в JS.
     */
    (function init() {

        for(var m = 0; m < movers.length; m++) {
            movers[m].style.top = (m * 10) + 'px';
        }

    })();

    /**
     * animation loop
     */
    function update() {

        // получаем последню позицию скролла
        var scrollY             = window.scrollY,
            mover               = null,
            moverTop            = [],
            halfWindowHeight    = window.innerHeight * 0.5,
            offset              = 0;

        // проходим через каждый mover div
        // и меняем его класс
        for(var m = 0; m < movers.length; m++) {

            mover       = movers[m];
            moverTop[m] = mover.offsetTop;

            if(scrollY > moverTop[m] - halfWindowHeight) {
                mover.className = 'mover left';
            } else {
                mover.className = 'mover';
            }

        }

        // продолжаем
        requestAnimFrame(update);
    }

    // schedule up the start
    window.addEventListener('load', update, false);

    // shim layer with setTimeout fallback
    window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       ||
              window.webkitRequestAnimationFrame ||
              window.mozRequestAnimationFrame    ||
              window.oRequestAnimationFrame      ||
              window.msRequestAnimationFrame     ||
              function( callback ){
                window.setTimeout(callback, 1000 / 60);
              };
    })();

</script>

</body>
</html>